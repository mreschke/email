#!/usr/bin/env php
<?php namespace Mreschke\Email;

// Require composer autoloader
require __DIR__.'/../vendor/autoload.php';

// Define and load config file
$config = (new LoadConfig())->handle();

// Get supplied command line options and arguments
$opts = (new DefineOptions())->handle($argv);

// Handle help and usage
if (empty($opts) || isset($opts['h']) || isset($opts['help'])) {
	exit((new ShowUsage())->handle());
}

// Handle send email
$driver = ucfirst($config['driver']);
$class = "Mreschke\Email\Send${driver}Email";
echo (new $class())->handle($opts, $config);
echo "\n";
